l{% extends 'base.html' %}
{% load static %}
{% block title %}
Netflix 
{% endblock title %}

{% block others %}
    <script src="https://unpkg.com/ionicons@5.4.0/dist/ionicons.js"></script>

{% endblock others %}
{% block content %}
    <style>
        .hero-section {
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.7)), var(--bg-image);
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20%;
            background: linear-gradient(to top, rgba(20, 20, 20, 1), transparent);
            pointer-events: none;
        }

        .play-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 700;
            letter-spacing: 1px;
            background-color: rgba(255, 255, 255, 1) !important;
            color: #000 !important;
            padding: 12px 32px !important;
            border-radius: 6px;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .play-btn:hover {
            background-color: rgba(230, 230, 230, 1) !important;
            transform: scale(1.08);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        }

        .info-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 700;
            letter-spacing: 1px;
            background-color: rgba(109, 109, 110, 0.7) !important;
            color: #fff !important;
            padding: 12px 32px !important;
            border-radius: 6px;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .info-btn:hover {
            background-color: rgba(109, 109, 110, 1) !important;
            transform: scale(1.08);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        }

        .movie-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            border-radius: 6px;
            position: relative;
            flex-shrink: 0;
        }

        .movie-card-image {
            position: relative;
            overflow: hidden;
            height: 100%;
        }

        .movie-card:hover {
            transform: translateY(-20px) scale(1.06);
            box-shadow: 0 32px 60px rgba(0, 0, 0, 0.8);
            z-index: 20;
        }

        .movie-card img {
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            object-fit: cover;
            width: 100%;
            height: 100%;
        }

        .movie-card:hover img {
            transform: scale(1.08);
            filter: brightness(0.8);
        }

        .movie-card-title {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 12px;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
            color: #fff;
            font-size: 0.875rem;
            font-weight: 600;
            text-align: center;
            transform: translateY(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .movie-card:hover .movie-card-title {
            transform: translateY(0);
        }

        .movie-list {
            scroll-behavior: smooth;
            scrollbar-width: thin;
            scrollbar-color: rgba(229, 9, 20, 0.6) transparent;
        }

        .movie-list::-webkit-scrollbar {
            height: 8px;
        }

        .movie-list::-webkit-scrollbar-track {
            background: transparent;
        }

        .movie-list::-webkit-scrollbar-thumb {
            background: rgba(229, 9, 20, 0.6);
            border-radius: 4px;
        }

        .movie-list::-webkit-scrollbar-thumb:hover {
            background: rgba(229, 9, 20, 1);
        }

        .section-title {
            position: relative;
            padding-bottom: 12px;
            margin-bottom: 28px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 40px;
            height: 5px;
            background: linear-gradient(90deg, #e50914, transparent);
            border-radius: 3px;
        }

        .description-text {
            line-height: 1.7;
            color: rgba(229, 229, 229, 0.95);
            font-size: 1.05rem;
        }

        .hero-tall {
            min-height: 100vh;
        }

        .h-44 {
            height: 11rem;
        }

        .h-52 {
            height: 13rem;
        }

        .now-featuring-label {
            text-transform: uppercase;
            font-size: 0.875rem;
            letter-spacing: 2px;
            font-weight: 700;
            color: #e50914;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .now-featuring-label::before {
            content: '';
            display: inline-block;
            width: 12px;
            height: 12px;
            background-color: #e50914;
            border-radius: 2px;
        }

        .hero-title {
            line-height: 1.1;
            text-shadow: 2px 4px 8px rgba(0, 0, 0, 0.8);
        }

        .buttons-container {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }

        .trending-section {
            padding: 60px 0;
        }

        @media (max-width: 768px) {
            .md\:w-40 {
                width: 10rem;
            }

            .buttons-container {
                gap: 12px;
            }

            .play-btn, .info-btn {
                padding: 10px 24px !important;
                font-size: 0.9rem;
            }
        }

        @media (min-width: 768px) {
            .md\:w-40 {
                width: 10rem;
            }

            .md\:h-52 {
                height: 13rem;
            }
        }


    </style>

    {% include 'partials/navbar.html' %}
    <main class='bg-black min-h-screen w-full'>
        <section class="hero-tall hero-section relative bg-no-repeat flex items-end pb-20 pl-6 md:pl-12" style="--bg-image: url('{% if show_case.background %}{{show_case.background.url}}{% else %}{% static 'movie.webp' %}{% endif %}');">
            <div class="relative z-10 w-full md:w-6/12 pr-4 md:pr-0">
                <span class="now-featuring-label">New & Trending</span>
                <h2 class="hero-title text-5xl md:text-7xl font-black text-white mb-6 mt-4">
                    {{show_case.title}}
                </h2>
                <p class="description-text mb-8">
                    {{show_case.description | slice:":120"}}...
                </p>
                <div class="buttons-container">
                    <a href="{% url 'core:play' movie_id=show_case.uuid %}">
                        <button class="play-btn">
                            <ion-icon name="play-circle" class="text-xl" style="font-size: 1.25rem;"></ion-icon>
                            <span>Play</span>
                        </button>
                    </a>

                    <a href="{% url 'core:show_det' movie_id=show_case.uuid %}">
                        <button class="info-btn">
                            <ion-icon name="information-circle-outline" class="text-xl" style="font-size: 1.25rem;"></ion-icon>
                            <span>More Info</span>
                        </button>
                    </a>
                </div>
            </div>
        </section>

        <section class='bg-black flex justify-center trending-section'>
            <div class="w-full max-w-7xl mx-auto px-6 md:px-12">
                <h2 class="section-title text-white text-3xl md:text-4xl">
                    Trending Now
                </h2>
                <div class="relative">
                    <button id="scroll-left" class="absolute left-0 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-70 text-white p-2 rounded-full hover:bg-opacity-90 transition-all duration-200 opacity-0">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                    </button>
                    <div id="movie-list" class="movie-list flex gap-4 overflow-x-auto pb-4 pr-6 scroll-smooth">
                        {% for movie in movies %}
                            <a href="{% url 'core:show_det' movie_id=movie.uuid %}" class="flex-shrink-0 group/movie">
                                <div class="movie-card w-32 md:w-40 h-44 md:h-52 relative overflow-hidden rounded-lg bg-gray-900 shadow-lg">
                                    <img src="{{movie.flyer.url}}" class="w-full h-full object-cover" alt="{{movie.title}}">
                                    <div class="movie-card-title truncate">{{movie.title}}</div>
                                </div>
                            </a>
                        {% endfor %}
                    </div>
                    <button id="scroll-right" class="absolute right-0 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-70 text-white p-2 rounded-full hover:bg-opacity-90 transition-all duration-200 opacity-0">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const movieList = document.getElementById('movie-list');
            const scrollLeftBtn = document.getElementById('scroll-left');
            const scrollRightBtn = document.getElementById('scroll-right');

            if (movieList && scrollLeftBtn && scrollRightBtn) {
                // Show/hide scroll buttons based on scroll position
                function updateScrollButtons() {
                    const scrollLeft = movieList.scrollLeft;
                    const scrollWidth = movieList.scrollWidth;
                    const clientWidth = movieList.clientWidth;

                    scrollLeftBtn.style.opacity = scrollLeft > 0 ? '1' : '0';
                    scrollRightBtn.style.opacity = scrollLeft < scrollWidth - clientWidth - 1 ? '1' : '0';
                }

                // Scroll left
                scrollLeftBtn.addEventListener('click', function() {
                    movieList.scrollBy({
                        left: -300,
                        behavior: 'smooth'
                    });
                });

                // Scroll right
                scrollRightBtn.addEventListener('click', function() {
                    movieList.scrollBy({
                        left: 300,
                        behavior: 'smooth'
                    });
                });

                // Update buttons on scroll
                movieList.addEventListener('scroll', updateScrollButtons);

                // Initial check
                updateScrollButtons();

                // Show buttons on hover
                const container = movieList.parentElement;
                container.addEventListener('mouseenter', function() {
                    updateScrollButtons();
                });

                container.addEventListener('mouseleave', function() {
                    scrollLeftBtn.style.opacity = '0';
                    scrollRightBtn.style.opacity = '0';
                });
            }
        });
    </script>
{% endblock content %}
